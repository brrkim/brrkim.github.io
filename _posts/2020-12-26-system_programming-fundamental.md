---
title: "시스템프로그래밍"
date: 2020-12-20 20:46:28 -0400
marp: true
categories: OS 운영체제 virtualmachine 가상머신
---

# 2. 시스템프로그래밍

## 2.1. 리눅스와 프로세스

### 2.1.1 프로세스와 바이너리의 이해

- 코드 이미지 또는 바이너리: 실행파일

- 실행중인 프로그램: 프로세스

  - 프로세스는 바이너리 이외에 여러 상태정보를 가짐
    - 가상 메모리 및 물리 메모리 정보 (pcb)
    - 시스템 리소스 관련 정보
  - 프로세스는 스케쥴링 단위가 됨

- 리눅스는 기본적으로 다양한 프로세스가 실행되는 환경

  - 유닉스철악: 여러 프로그램이 유기적으로 자기 일을 수행하면서 전체 시스템이 동작하도록 함

- foreground process, background process

  - foreground process

    - 쉘에서 해당 프로세스 실행을 명령한 후 해당 프로세스 수행 종료까지 사용자가 다른 입력을 하지 못하는 프로세스

  - background process

    - 사용자 입력과 상관없이 실행되는 프로세스 -> 다른 명령을 실행할 수 있게 해줌

    - 쉘에서 해당 프로세스 실행 시, 맨 뒤에 & 를 붙여줌

    - 사용 예

      ```sh
      #find / -name '*.py' > list.txt &
      [1] 57
      ```

      [1]은 작업 번호 (job number), 57은 pid (process ID)를 나타냄

## 2.2 리눅스와 프로세스 (2)

### 2.2.1  foreground process 제어하기

- 현재 쉘에서 작업 상태 확인 `jobs`
  - CTRL+C : 작업 취소
  - CTRL+D : 작업 정상 종료
  - CTRL+Z : 작업 대기/정지
  - '+' 기호로 표시된 작업이 먼저 실행되는 job이고 '-'기호가 그 다음임
    - bg 명령어 사용 시 일시정지된 프로세스 background 실행
    - fg 명령어 사용 시 일시정지된 프로세스 foreground 실행
  - 표시되는 작업번호는 PID와 달리 별도로 부여되는 백그라운드 작업 목록 상의 번호
  - 작업 목록은 현재 쉘 세션에 달린 것으로, 다른 세션과는 독립적임
  - `kill` 명령어 뒤에 `%작업번호` 를 입력해서 종료 시킬 수 있음

- 프로세스 상태확인 `ps`

  - ps
    - 자기가 실행한 프로세스만 보여진다
  - ps -aux
    - -a: 시스템 사용하는 모든 사용자의 프로세스 출력
    - -u: 프로세스 소유자에 대한 상세 정보 출력
    - -x: 데몬 프로세스까지 확인
      - 데몬프로세스
        - 사용자 모르게 시스템 관리를 위해 실행되는 프로세스로, 보통 시스템이 부팅될 때 자동 실행

- 프로세스 강제 종료 `kill -9`

  ```sh
  $ kill -9 [PID]
  ```



## 2.3 리눅스 파일 시스템과 관련 쉘 명령어

### 2.3.1  가상 파일 시스템 인터페이스

- VFS 인터페이스 아래 디바이스는 주로 읽기 쓰기로 다뤄진다
- /dev 내 무수한 장치들과 tty (터미널)이 있음
  - tty 파일은 가상 파일 시스템 인터페이스를 통해 가상 터미널 환경이라 하는 가상디바이스에 연결되어있음
  - 즉 키보드 인풋을 주면  터미널 통해 가상파일시스템인터페이스 통해 tty 파일에 저장되는 것임
  - 이 같은 원리로 디바이스와 운영체제는 통신함
  - OS <----> VFS interface <----> tty <----> device 

### 2.3.2 파일 시스템 탐색

- 리눅스 파일 탐색: 예 - /home/ubuntu/link.txt
- 각 디렉토리 엔트리(dentry)를 탐색
  - 각 엔트리는 해당 디렉토리 파일, 디렉토리 정보를 가짐
- /home/ubuntu/link.txt 탐색 예시
  - / dentry 에서 home의 디렉토리 inode를 찾고 home inode의 덴트리에서 ubuntu 찾고, ubuntu inode의 덴트리에서 link.txt 파일 이름과 inode를 얻음
  - ![image-20201227013026509](D:\Projects\Study\brrkim.github.io\images\image-20201227013026509.png)

